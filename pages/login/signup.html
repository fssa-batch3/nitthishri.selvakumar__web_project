<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blackwoodalley</title>
    <link rel="stylesheet" href="../../assets/css/signup.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" rel="stylesheet">
</head>

<body>
    <div class="form-box">
        <div class="button-box">
            <h1>Signup</h1>


        </div>
        <div class="social-media">
            <i class="fa-brands fa-facebook"></i>
            <i class="fa-brands fa-google"></i>
            <i class="fa-brands fa-twitter"></i>
        </div>
        <div class="box">

            <form id="register_form" type="submit">

                <input type="text" class="text" placeholder="First Name" id="first_name"
                    title="Name shouldn't contain spaces and Number" pattern="[A-Za-z]+"
                    title="First name cannot contain spaces" required="true">

                <input type="text" class="text" placeholder="Last Name" id="last_name" pattern="[A-za-z]+"
                    required="true">

                <input type="email" class="text" placeholder="E-mail" id="email" required="true">

                <input type="password" class="text" placeholder="Enter password" id="password" required="true">

                <button type="submit" class="submit">Get started</button>

            </form>

        </div>

    </div>

    <script>



        const form = document.getElementById("register_form");

        const first_name = document.getElementById("first_name");

        const last_name = document.getElementById("last_name");

        const email_id = document.getElementById("email");
 
        const password = document.getElementById("password");



        const formValidation = () => {

            const firstnamevalue = first_name.value.trim();

            const lastnamevalue = last_name.value.trim();

            const emailvalue = email_id.value.trim();

            const passwordvalue = password.value.trim();


            const usersList = [];

            const user = {};

            user["firstname"] = firstnamevalue;
            user["lastname"] = lastnamevalue;
            user["emailid"] = emailvalue;
            user["password"] = passwordvalue

            let user_Details = JSON.parse(localStorage.getItem('user_list')) ?? usersList;
            


            let success = true;

            if (user_Details != null) {

                for (let i = 0; i < user_Details.length; i++) {

                    if (user_Details[i].emailid == emailvalue) {

                        alert("Already Have a account");

                        success = false;

                        break;
                    }

                }
            }

            if (success) {

                user_Details.push(user);

                localStorage.setItem("user_list", JSON.stringify(user_Details));

                alert("Account created Successfully");

                window.location.href = "login.html";
            }

            else {
                alert("Already Have a account");
            }

        }


        form.addEventListener('submit', e => {

            e.preventDefault();

            formValidation();

            // console.log("working");
        });


    </script>
</body>

</html>